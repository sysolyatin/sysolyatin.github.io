---
layout: post
title:  "Действие после отпускания кнопки Flash"
---
Ещё один из самых частых вопросов в чате по МА: «Как выполнить какое-то действие после отпускания кнопки Flash?».

И действительно, у настроек cue в grandMA2 есть поле CMD, которое позволяет выполнять любую команду пульта при запуске этой самой cue, но у пульта нет подобного поля с действием при отключения этой cue.

Некоторыми манипуляциями его можно добиться, правда не в явном виде в настройках cue, но поле для ввода команды тоже будет.

Для демонстрации работы я запатчил в шоу-файл два ламповых PAR64 и сделал с ними две секвенции, первая назначена на 101 кнопку в режиме flash и включает первый парик, вторая назначена на 106 кнопку в режиме go и включает второй парик:

![](/static/notes/action-after-flash/image.png)

Наша задача будет заключаться в следующем: после отпуская 101-й кнопки должна включиться 106-я (по факту вы можете сделать что угодно, в том числе и выполнить любую команду пульта).

Тут нам приходит на помощь то, что grandMA2 умеет, как отдавать DMX сигнал, так его и принимать. И такую операцию управления можно реализовать, если прочитать значение какого-то dmx канала, который мы же сами в себя и отправим.

Для этого нужно добавить в патче новый диммерный прибор c адресом и ID прибора, которые будет очень далеко от настоящих приборов шоу (чтобы точно ничего не напутать, если будет много приборов в шоу):

![](/static/notes/action-after-flash/image-1.png)

Далее необходимо зайти в настройки (**Setup**) и выбрать **Remote Input Setup**, а в нём зайти в раздел **Dmx Remotes**

![](/static/notes/action-after-flash/image-2.png)

Тут нужно нажать на клавишу Add и в добавленной строке указать номер этого служебного dmx канала и выбрать действие, которое нужно совершить, если на этот канал придёт сигнал, в нашем случае мы будем нажимать Button 1 на 106-м executor-е

![](/static/notes/action-after-flash/image-3.png)

Теперь выходим из настроек, сбрасываем программатор (если там что-то есть), выбираем наш служебный прибор (в примере это FixID 8000) и создаём с ним cue, где он открыт. Это нужно для инвертирования значения.

![](/static/notes/action-after-flash/image-4.png)

При этом запустится 106-й executor, так как на служебный канал управления пришёл сигнал. Если этого не произошло, ещё раз внимательно прочитайте всё, что было выше.

Далее у этого служебного executor-а необходимо отключить функцию «Off On Overwriten»

![](/static/notes/action-after-flash/image-5.png)

Теперь остался последний шаг, у служебного прибора устанавливаем значение диммера в 0 и записываем это на 101-й executor, выбирая Merge.

Теперь отключаем executor 106 (кнопка Off и тыкаем на него), и можно проверять, что у нас получилось:

![](/static/notes/action-after-flash/go_after_flash.gif)

Соответственно, если стоит задача сделать выключение второго парика в момент нажатия кнопки flash для первого — то это легко сделать как раз обычной командой в настройке cue.

Ну и как можно было догадаться, таким образом можно выполнять не только действие при отпускании кнопки flash, а при любом варианте отключения cue с записанным нулевым диммером служебного канала.

Как ещё один вариант реализации данного действия — вместо создания дополнительной служебной cue, можно использовать диммерный прибор с инверсированным значением.