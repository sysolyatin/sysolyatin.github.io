---
layout: post
title:  "Режимы работы CUE"
cover: "/static/notes/cue-mode/cover.png"
---

В grandMA2 в режиме редактирования содержимого секвенции (таблица со всеми CUE) у каждой CUE есть вариант выбора расширенного режима её работы - MODE. При попытке отредактировать значение мы увидим маленькое окно со следующим набором пунктов:

![](/static/notes/cue-mode/select-mode-cue.png)

Официальный мануал почти ничего не говорит про эти самые режимы, а то, что в нём написано, без примеров непонятно было даже мне, поэтому я изучил кучу документации, форумов, видео на ютубе, провел огромное количество экспериментов и теперь готов поделиться этой информацией со всеми.

> Заметка рассчитана на опытных пользователей grandMA2 и в первую очередь будет полезна театральным художникам по свету, так как позволяет
оптимизировать свою работы с большими cue-листами.
>
> Будьте  осторожны с выбором режимов, так как они могут полностью изменять функциональность воспроизведения: переопределение приоритетов, остановка трекинга, выключение секвенции и т.д.

> Все приведенные ниже примеры показаны на секвенциях с включенным трекингом!

## Normal

Режим, который не делает ничего специфического, служит для отключения последующих режимов. Является дефолтным при записи CUE.

## Assert

Позволяет отменить LTP-приоритет других экзекьютеров с такими же приборами, как в CUE, к которому он применяется. Давайте разберем подробнее, у нас есть два экзекьютора со следующими CUE:

**Первый:**

1. Приборы открыты по диммеру на 10%

**Второй:**

1. Приборы открыты по диммеру на 100%
2. Приборы стоят в позиции с пресетом "45"
3. Приборам задается розовый цвет
4. Приборам задается зеленый цвет и позиция из пресета "UP"

![](/static/notes/cue-mode/exec-2.png)

Сценарий использования будет следующий:

1. Запускаем CUE 1 у второго экзекьютора - приборы включаются на 100%
2. Запускаем CUE 2 у второго экзекьютора - приборы встают в позицию "45", трекингом прилетел диммер на 100% из первой CUE
3. Запускаем первый экзекьютор - яркость опускается до 10%, так как приоритете у обоих экзекьютором LTP, позиция "45" на приборах осталась от второго эекзекьютора
4. Запускаем CUE 3 у второго экзекьютора - приборы красятся в розовый цвет, трекингом прилетели позиция "45" из второй CUE и диммер на 100% из первой CUE, но диммер перекрыт первым экзекьютором, поэтому работает на 10% по факту
5. Запускаем CUE 4 у второго экзекьютора - приборы красятся в зеленый цвет и встают в позицию "UP", трекингом прилетел диммер на 100% из первой CUE, но диммер перекрыт первым экзекьютором, поэтому работает на 10% по факту


А теперь давайте для CUE 3 из секвенции на втором экзекьюторе поменяем режим на *Assert*. Тогда поведение трекинга и приборов немного преобразится:

1. Запускаем CUE 1 у второго экзекьютора - приборы включаются на 100%
2. Запускаем CUE 2 у второго экзекьютора - приборы встают в позицию "45", трекингом прилетел диммер на 100% из первой CUE
3. Запускаем первый экзекьютор - яркость опускается до 10%, так как приоритете у обоих экзекьютором LTP, позиция "45" на приборах осталась от второго эекзекьютора
4. Запускаем CUE 3 у второго экзекьютора - приборы красятся в розовый цвет, трекингом прилетели позиция "45" из второй CUE и диммер на 100% из первой CUE, **но диммер теперь не перекрывается значением из первого экзекьютора и равен тому, что было у нас по трекингу, т.е. приборы светят на 100%**
5. Запускаем CUE 4 у второго экзекьютора - приборы красятся в зеленый цвет и встают в позицию "UP", трекингом прилетел диммер на 100% из первой CUE

> Отменяются только уже запущенные экзекьюторы! Если находиться на CUE 3 второго эекзекьютора и запустить первый эекзекьютор, то конечно же он спокойно перекроет значение диммера, и яркость приборов станет 10%.

## X-Assert

Этот режим CUE в grandMA2 работает аналогично предыдущему, за исключением того, что он учитывает время. Давайте разберем подробнее, у нас есть два экзекьютора со следующими CUE:

**Первый:**

1. Приборы открыты по диммеру на 100%
2. Приборы стоят в позиции с пресетом "45" (FADE 3 секунды)

**Второй:**

1. Приборы открыты по диммеру на 0% (FADE 20 секунд)

Сначала рассмотрим вариант использования экзекьюторов без применения X-Assert:

1. Запускаем CUE 1 у первого экзекьютора - приборы загораются на 100%
2. Запсуакаем CUE 1 у второго экзекэтора - приборы начинают снижать яркость до 0% в течение 20 секунд
3. Не дожидаясь их гашения запускаем CUE 2 у первого экзекьютора - приборы за 3 секунды встают в позицию "45" и продолжают гаснуть

Если для CUE 2 у первого экзекьютора применить режим  X-Assert, тогда поведение трекинга будет выглядеть следующим образом:

1. Запускаем CUE 1 у первого экзекьютора - приборы загораются на 100%
2. Запсуакаем CUE 1 у второго экзекэтора - приборы начинают снижать яркость до 0% в течение 20 секунд
3. Не дожидаясь их гашения запускаем CUE 2 у первого экзекьютора - приборы за 3 секунды встают в позицию "45", **за это же время они плавно возвращаются к яркости 100%, после этого второй экзекьютор отключается**

Если в данном примере применить обычный Assert вместо X-Assert, то при включении CUE 2 у первого экзекьютора приборы будут плавно вставать в позицию, а вот **к значению диммера 100% вернутся моментально**.


## Release

При переходе на CUE, у которой стоит такой режим вся секвенция выключается.

## Break

Для примера создадим секвенцию из трёх CUE:

1. Приборы открыты по диммеру на 100%
2. Приборы стоят в позиции с пресетом "45"
3. Приборам задается розовый цвет

Мы точно знаем, что на CUE 3 нам необходимо иметь диммер в значении 100%, а позицию "45". Такой мы видели световую картину при записи CUE.
Чтобы получилось так, как мы хотим, можно прервать трекинг на этой самой CUE 3, выставив режим Break.

После выставления этого режима, если какой-то из параметров приборов CUE 3 будет изменен в будущем в предыдущих CUE, то в CUE 3 явно пропишется то значение, которое было в ней по трекингу до изменений.

Например, мы выставляем режим Break для CUE 3, а после этого меняем в первой CUE значение диммера на 50%. В итоге при воспроизведении секвенции получится следующее:

1. Приборы светят на 50%
2. Приборы встали в позицию "45", а по трекингу прилетело значение диммера 50%
3. Приборы светят **на 100%**, так как это было значение из первой CUE, до её изменения, теперь оно явно записано в наше CUE, у приборов включился розовый цвет, а по трекингу прилетела позиция "45", так как она не была нигде изменена в предыдущих шагах.

> При установке этого режима в секвенции в списке CUE появляется белая линия, которая показывает на каком элементе списка произойдет прерывание трекинга.


## X-Break

Для примера создадим секвенцию из трёх CUE:

1. Приборы открыты по диммеру на 100%
2. Приборы стоят в позиции с пресетом "45"
3. Приборам задается розовый цвет

И для первого CUE зададим большое время FADE, например, 20 секунд.

Теперь если запустить секвенцию, то в первой CUE начнет плавно прибавляться диммер от 0% до 100% в течение 20 секунд, но мы не дожидаясь этого переключаемся на вторую CUE - приборы встают в позицию "45", а диммер продолжает разжигаться. 

Не дожидаясь его полного включения переключаемся на CUE 3 - теперь у нас ещё и добавился розовый цвет, а диммер по-прежнему продолжает разжигаться.

Давайте представим себе задачу:\
Независимо от того, дождались мы полного включения по диммеру или нет, при переходе на CUE 3 диммер обязательно должен быть включен на 100%.

X-Break как раз позволяет нам её решить. Если для CUE 3 установить такой режим работы, то независимо от того, успели ли завершиться все тайминги предыдущих CUE - они будут принудительно завершены, как будто мы перед переходом на CUE 3 дождались полного включения диммера.

При этом полностью сохраняется поведение режима Break, т.е. если какой-то из параметров приборов CUE с этим режимом будет изменен в будущем в предыдущих CUE, то в CUE с этим режимом явно пропишется то значение, которое было в ней по трекингу до изменений.